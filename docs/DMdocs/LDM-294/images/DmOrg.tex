
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Document:      DM  organisation chart reporting lines
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass{article}

\usepackage{times,layouts}
\usepackage{tikz,hyperref,amsmath}
\usetikzlibrary{positioning,arrows,shapes,decorations.shapes,shapes.arrows}
\usetikzlibrary{backgrounds,calc}

\usepackage[paperwidth=31cm,paperheight=155mm,
left=-2mm,top=3mm,bottom=0mm,right=0mm,
noheadfoot,marginparwidth=0pt,includemp=false,
textwidth=30cm,textheight=50mm]{geometry}


\newcommand\showpage{%
\setlayoutscale{0.5}\setlabelfont{\tiny}\printheadingsfalse\printparametersfalse
\currentpage\pagedesign}

\hypersetup{pdftitle={DM organisation }, pdfsubject={Diagram illustrating the
 reporting lines in LSST DM Group}, pdfauthor={ William O'Mullane}}

\input{styles}

\newcommand\dmnodeo[5][]{
            \node (#2) [mbox, text width=65mm, rectangle split, rectangle split parts=2, #1]
                {
                #3
                \nodepart{second} \vspace{10mm}
                };
             \node({#2}a) [above=-12mm of #2, text width=0mm] {};
             \node({#2}s) [mbox, left=-1pt of {#2}a, text width=30mm] {{\small \bf TCAM}\\ #4};
             \node({#2}t) [mbox, right=-1pt of {#2}a, text width=30mm] {{\small \bf SCI Owner}\\ #5};
        }

\newcommand\dmnode[5][]{
            \node (#2) [mbox, text width=36mm, rectangle split, rectangle split parts=2, #1]
                {
                #3
                \nodepart{second} \vspace{20mm}
                };
             \node({#2}t) [mbox, below=6mm of {#2}.north, text width=32mm] {{\small \bf TCAM}\\ #4};
             \node({#2}s) [mbox, below=2pt of {#2}t, text width=32mm] {{\small \bf SCI Owner}\\ #5};
        }


\begin{document}

\begin{tikzpicture}[node distance=0mm]


    \node (dm) [arcbox, text width=25cm,  minimum height=10mm, rectangle split, rectangle split parts=2] 
	{ \textbf{Data Management Group}
	   \nodepart{second} \vspace{65mm} 
	};

    \node (dmpm) [divbox, above=-2.5cm of dm.north] {\textbf{DM Project Manager} William O'Mullane};
    \node (pm) [divbox, above=.5cm of dm] {\textbf{ Project Manager} Victor Krabendam};
    \node (dmps) [divbox, right=1.5cm of dmpm] {\textbf{ DM Project Scientist}\\ Mario Juric};
    \node (ps) [divbox, right=1.5cm of pm] {\textbf{  Project Scientist}\\ \u{Z}eljko Ivezi\'c};


    \node (al) [below=29mm of dmpm, text width=0mm]{};
    \node (udmpm) [below=5mm of dmpm, text width=0mm]{};
    \node (sysarc) [mbox, left=2.2cm of udmpm.north, text width=32mm] {\textbf{ System Architect}\\ K.T. Lim };

    \dmnode[left=0mm of al]{das}{Data Access Services}{Fritz Mueller}{\ldots}  ;
    \dmnode[left=2mm of das]{drp}{Data Release Production}{John Swinbank}{Jim Bosch}  ;
    \dmnode[left=2mm of drp]{alerts}{Alerts}{Simon Krughoff}{Andy Connolly}  ;
    \dmnode[right=0mm of al]{suit}{SUIT} {Xiuqin Wu  }{ David Ciardi } ;
  \dmnode[right=2mm of suit]{square}{SQuaRE} {Frossie Economou}{ Michael Wood-Vasey} ;
    \dmnode[right=2mm of square]{infra}{Infrastructure} { Margaret Gelman   }{ \ldots } ;




   \draw[line] (dmpm.north) -- ++(0,0.8) -| (pm.south);

%dm lines second number is the proportional turning point of the line
   \draw[line] (alerts.north) -- ++(0,0.3) -| (dmpm.south);
   \draw[line] (drp.north) -- ++(0,0.3) -| (dmpm.south);
   \draw[line] (das.north) -- ++(0,0.3) -| (dmpm.south);
   \draw[line] (suit.north) -- ++(0,0.3) -| (dmpm.south);
   \draw[line] (square.north) -- ++(0,0.3) -| (dmpm.south);
   \draw[line] (infra.north) -- ++(0,0.3) -| (dmpm.south);

   \draw[line] (sysarc.east) to (udmpm.north);
%science
   \draw[sline] (ps.west) to (pm.east);
   \draw[sline] (dmps.west) to (dmpm.east);

   

\end{tikzpicture}
\end{document}
